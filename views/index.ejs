<% include partials/header %>


  <table class="table table-hover">
    <thead>
      <h3>The Users Are:</h3> <br>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>City</th>
          <th>Phone</th>
          <th>Posts</th>
          <th>Tasks</th>
        </tr>
    </thead>

    <tbody id="myTable">
       <% usrData.forEach(usr => { %>
          <tr>
            <td>
              <div class="dropdown">
                  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"> <%= usr.name %>
                    <span class="caret"></span></button>
                      <ul class="dropdown-menu">
                        <li><a href="/user/<%= usr.id %>">User Details</a></li>
                        <li><a href="/add_post/<%= usr.id %>">Add Post</a></li>
                        <li><a href="/add_task/<%= usr.id %>">Add Task</a></li>                         
                        <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                        <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>                    
                      </ul>
              </div>
            </td>

            <td> <%= usr.email %> </td>
            <td> <%= usr.address.city %> </td>
            <td> <%= usr.phone %> </td>

            <td>  
                <% pstData.forEach(pst => { %>
                        <% if  (pst.userId  == usr.id) { %>    
              <ul class="list-group">
                    <li class="list-group-item">                                        
                        <b><%=  pst.title %></b><br>
                        <li class="list-group-item">
                        <i style="font-size:20px;color:red" class="fa">&#xf014;</i>
                        <i style="font-size:20px" class="fa">&#xf044;</i>
                      </li>
                    </li>
              </ul>                       
                                
                        <%  } %>
                    <%  }) %>
         
            </td>

            <td>
            
                  <% tskData.forEach(tsk => { %>
                      <% if  (tsk.userId  == usr.id) { %>
                        <ul class="list-group">
                            <li class="list-group-item">           
                            <%=  tsk.title %>  <br> <br>
                              
                            <% if  (tsk.completed == true) { %>
                                <div class="progress">
                                  <div class="progress-bar progress-bar-success" role="progressbar" style="width:100%">
                                    Completed!
                                  </div>
                                </div>
                            <%  } %>
                            
                            <% if  (tsk.completed == false) { %>
                                  <div class="progress">
                                      <div class="progress-bar progress-bar-warning" role="progressbar" style="width:60%">
                                          In Progress.... 
                                     </div>
                                  </div>
                            <%  } %>
                            <li class="list-group-item">           

                            <i style="font-size:20px;color:red" class="fa">&#xf014;</i>
                            <i style="font-size:20px" class="fa">&#xf044;</i>
                            </li>
                            </li>
                            </ul>
                          
                     
                      <%  } %>
                  <% }) %>
             
                           
            </td>
          </tr>
      <%  }) %>
    </tbody>
  </table>  

        <script>
            $(document).ready(function(){
              $("#myInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function() {
                  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
              });
            });
            </script>
            <script>
              function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
              }
              
              function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
              }
            </script>

            
      <% include partials/footer %>
